<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Shape flow experiment report</title>

    <style>
        .row{
            width:100%;
            height:250px;
            font-size:10px;
            font-family: "Open Sans", "DejaVu Sans", sans;
            margin-bottom:4em;
            text-align: center;
        }
        .collumn{
            display:inline-block;
            width:150px;
            background-color:pink;
            margin:1em;
            text-align:center;
            float:left;
        }

        .collumn li
        {
            padding:0.5rem 0rem;
        }

        .row ul{
            list-style:none;
            padding:0;
            margin:0;
        }

        .row::after{
            clear:both;
            display:block;
            content: "";
            border-top: .2rem solid silver;
            width: 100%;
        }

        .header{
            font-weight: bold;
            padding-bottom:1em;
        }

        .button{
            cursor: pointer;
        }

        .selected{
            background-color: #c8c8c8;
            color:yellow;
            font-weight:bold;
        }

        .display
        {
            box-sizing: border-box;
            width:100%;
            height:400px;
            text-align:center;
        }

        .display-1
        {
            box-sizing: border-box;
            height:100%;
            text-align:center;
        }

        .display-1 div
        {
            width:49%;
            display:inline-block;
            box-sizing: border-box;
            border:0 1em 0 1em;
        }

        .display-2 div
        {
            width:49%;
            display:inline-block;
            box-sizing: border-box;
            border:0 1em 0 1em;
        }

        .display-1 img
        {
            height:100%;
        }

        .display-2
        {
            box-sizing: border-box;
            height:100%;
            text-align:center;
        }

        .display-2 img
        {
            height:100%;
        }

        .display > div
        {
            float:left;
            display:inline-block;
        }

        .summary-flow{
            height:100%;
        }

        .odr-model
        {
            height:100%;
        }

        .image-sequence{
            float:none;
            height:100%;
        }

        .hidden{
            display:none !important;
        }

        .full{
            width:100%;
        }

        .half{
            width:50%;
        }

        body{
            visibility:hidden;
        }

    </style>

    <script>
        var basePath;
        function build_path()
        {
            var r=document.getElementsByClassName("row")[0];
            var l=r.children.length;
            var relPath="";
            var shapeName="";
            for(var i=0;i<l;i++)
            {
                var c=r.children[i];
                var buttons=c.children[0].children;
                for(var j=0;j<buttons.length;j++)
                {
                    if(buttons[j].classList.contains("selected"))
                    {
                        if( buttons[j].hasAttribute("path") )
                        {
                            relPath = relPath.concat(buttons[j].getAttribute("path"), "/");
                        }

                        if( buttons[j].getAttribute("type")=="shape" )
                        {
                            shapeName=buttons[j].getAttribute("path");
                        }
                    }
                }
            }

            relPath=relPath.concat(shapeName.toLowerCase(),".svg");

            return relPath;
        }

        function get_current_display()
        {
            var display = document.getElementsByClassName("display")[0];
            for(var i=0;i<display.children.length;++i)
            {
                if(display.children[i].classList.contains("active"))
                {
                    return display.children[i];
                }
            }
        }

        function get_active_summary_flow()
        {
            var activeDisplay = get_current_display();
            var subdisplays = activeDisplay.children;
            for(var i=0;i<subdisplays.length;++i)
            {
                if(subdisplays[i].classList.contains("summary-flow"))
                {
                    return subdisplays[i];
                }
            }
        }

        function get_active_odr_model()
        {
            var activeDisplay = get_current_display();
            var subdisplays = activeDisplay.children;
            for(var i=0;i<subdisplays.length;++i)
            {
                if(subdisplays[i].classList.contains("odr-model"))
                {
                    return subdisplays[i];
                }
            }
        }

        function load_figure()
        {
            var relPath=build_path();
            var fullPath=basePath.concat("/",relPath);

            var summary_flow = get_active_summary_flow();
            summary_flow.children[0].setAttribute("src",fullPath);

            var odr_model = get_active_odr_model();
            var odr_image_path = fullPath.substr(0,fullPath.lastIndexOf("/"));
            odr_image_path=odr_image_path.concat("/","odr-model.svg");
            odr_model.children[0].setAttribute("src",odr_image_path);

            console.log(odr_image_path);
        }


        function select(el)
        {
            _select(el,true);
        }

        function _select(el,load_flag)
        {
            var list_li=el.parentElement.children;
            for (var i=0;i<list_li.length;i++)
            {
                if(list_li[i].hasAttribute("type"))
                {
                    list_li[i].className="button";
                }

            }
            el.className="button selected";
            if(load_flag)
            {
                load_figure();
            }

        }

        function default_buttons()
        {
            var r=document.getElementsByClassName("row")[0];
            var l=r.children.length-1;
            for(var i=0;i<l;i++)
            {
                var c=r.children[i];
                if(c.hasAttribute("menu"))
                {
                    var buttons = c.children[0].children;
                    var first = buttons[1];
                    _select(first, false);
                }
            }
        }

        function freeze(el)
        {
            var display = document.getElementsByClassName("display")[0];

            if(el.innerHTML=="Freeze")
            {
                el.innerHTML="Unfreeze";
                for(var i=0;i<display.children.length;i++)
                {
                    display.children[i].classList.remove("full");
                    display.children[i].classList.remove("hidden");
                    display.children[i].classList.remove("active");
                    display.children[i].classList.add("half");
                }
                display.children[1].classList.add("active");
                load_figure();
            }else
            {
                el.innerHTML="Freeze";
                for(var i=0;i<display.children.length;i++)
                {
                    display.children[i].classList.remove("half");
                }

                display.children[0].classList.add("full");
                display.children[0].classList.add("active");
                display.children[1].classList.add("hidden");
                load_figure();
            }
        }


        function summary(el)
        {
            var display = document.getElementsByClassName("display")[0];
            var display_1 = display.children[0];

            if(el.innerHTML=="Summary")
            {
                el.innerHTML="Image Sequence";
                display_1.children[0].classList.add("hidden");
                display_1.children[1].classList.remove("hidden");
            }else
            {
                el.innerHTML="Summary";
                display_1.children[1].classList.add("hidden");
                display_1.children[0].classList.remove("hidden");
            }
        }

        function init()
        {
            basePath=window.prompt("Enter images base folder");
            if(basePath=="")
	        {
	            basePath=window.location.toString();
        	    basePath=basePath.substring(0, basePath.lastIndexOf("/") );
	        }else{
		        basePath="file://".concat(basePath);
            }
            default_buttons();
            document.body.style.visibility="visible";
        }

        window.onload=init;


    </script>
</head>
<body>

<div class="row">
    <div class="collumn" menu>
        <ul>
            <li class="header">Shape</li>
            <li class="button" onclick="select(this)" path="triangle" type="shape">Triangle</li>
            <li class="button" onclick="select(this)" path="square" type="shape">Square</li>
            <li class="button" onclick="select(this)" path="pentagon" type="shape">Pentagon</li>
            <li class="button" onclick="select(this)" path="heptagon" type="shape">Heptagon</li>
            <li class="button" onclick="select(this)" path="ball" type="shape">Ball</li>
            <li class="button" onclick="select(this)" path="ellipse" type="shape">Ellipse</li>
            <li class="button" onclick="select(this)" path="flower" type="shape">Flower</li>
        </ul>
    </div>

    <div class="collumn" menu>
        <ul>
            <li class="header">Method</li>
            <li class="button" onclick="select(this)" path="probe" type="method">Probe</li>
            <li class="button" onclick="select(this)" path="improve" type="method">Improve</li>
        </ul>
    </div>

    <div class="collumn" menu>
        <ul>
            <li class="header">Space</li>
            <li class="button" onclick="select(this)" path="pixel-space" type="space">Pixel</li>
            <li class="button" onclick="select(this)" path="interpixel-space" type="space">Interpixel</li>
        </ul>
    </div>

    <div class="collumn" menu>
        <ul>
            <li class="header">Computation Center</li>
            <li class="button" onclick="select(this)" path="pixel" type="comp-center">Pixel</li>
            <li class="button" onclick="select(this)" path="linel" type="comp-center">Linel</li>
            <li class="button" onclick="select(this)" path="pointel" type="comp-center">Pointel</li>
        </ul>
    </div>

    <div class="collumn" menu>
        <ul>
            <li class="header">Profile</li>
            <li class="button" onclick="select(this)" path="single" type="profile">Single</li>
            <li class="button" onclick="select(this)" path="double" type="profile">Double</li>
            <li class="button" onclick="select(this)" path="single-opt" type="profile">Single-Opt</li>
            <li class="button" onclick="select(this)" path="double-opt" type="profile">Double-Opt</li>
            <li class="button" onclick="select(this)" path="single-inner" type="profile">Single-Inner</li>
            <li class="button" onclick="select(this)" path="double-inner" type="profile">Double-Inner</li>
        </ul>
    </div>

    <div class="collumn" menu>
        <ul>
            <li class="header">Radius</li>
            <li class="button" onclick="select(this)" path="radius_3" type="radius">3</li>
            <li class="button" onclick="select(this)" path="radius_5" type="radius">5</li>
        </ul>
    </div>

    <div class="collumn" menu>
        <ul>
            <li class="header">Levels</li>
            <li class="button" onclick="select(this)" path="level_3" type="levels">3</li>
            <li class="button" onclick="select(this)" path="level_2" type="levels">2</li>
            <li class="button" onclick="select(this)" path="level_-3" type="levels">-3</li>
            <li class="button" onclick="select(this)" path="level_-2" type="levels">-2</li>
        </ul>
    </div>

    <div class="collumn" menu>
        <ul>
            <li class="header">Opt</li>
            <li class="button" onclick="select(this)" path="opt" type="opt">True</li>
            <li class="button" onclick="select(this)" path="no-opt" type="opt">False</li>
        </ul>
    </div>

    <div class="collumn" actions>
        <ul>
            <li class="header">Actions</li>
            <li class="button" onclick="freeze(this)" type="action">Freeze</li>
            <li class="button" onclick="summary(this)" type="action">Image Sequence</li>
        </ul>
    </div>
</div>

<div class="display">
    <div class="display-1 full active">

        <div class="odr-model">
            <img src="test.svg" /><br>
            ODR-Model
        </div>

        <div class="image-sequence hidden">
            <img src="triangle.svg" /><br>
            Image Sequence
        </div>

        <div class="summary-flow">
            <img src="test.svg" /><br>
            Summary Flow
        </div>
    </div>

    <div class="display-2 half hidden">
        <div class="image-sequence hidden">
            <img src="test.svg" /><br>
            Image Sequence
        </div>

        <div class="summary-flow">
            <img src="test.svg" /><br>
            Summary Flow
        </div>

        <div class="odr-model">
            <img src="test.svg" /><br>
            ODR-Model
        </div>
    </div>

</div>

</body>
</html>
